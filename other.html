<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>График работы сотрудников</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .schedule-cell {
            transition: all 0.2s ease;
        }
        .schedule-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .scroll-container {
            scroll-behavior: smooth;
        }
        .admin-panel {
            max-height: 80vh;
            overflow-y: auto;
        }
        .overtime-input {
            width: 80px;
        }
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s;
        }
        .fade-enter, .fade-leave-to {
            opacity: 0;
        }
        .login-modal {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-indigo-700">График работы сотрудников</h1>
            <button id="toggle-admin" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
                Админ-панель <i class="fas fa-lock ml-1"></i>
            </button>
        </header>

        <!-- Main Content -->
        <div id="main-content">
            <!-- Employee Selector -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <div class="flex flex-wrap items-center gap-4">
                    <div class="w-full md:w-auto">
                        <label for="employee-select" class="block text-sm font-medium text-gray-700 mb-1">Выберите сотрудника:</label>
                        <div class="relative">
                            <select id="employee-select" class="block w-full md:w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="all">Все сотрудники</option>
                            </select>
                        </div>
                    </div>
<!-- Кнопка входа в админку -->
<div class="fixed top-4 right-4">
    <button id="admin-login-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg">
        Админ-панель
    </button>
</div>

<!-- Модальное окно логина -->
<div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded-lg shadow-lg w-80">
        <h2 class="text-2xl font-bold mb-4 text-center">Вход в админ-панель</h2>
        <input id="admin-username" type="text" placeholder="Логин" class="w-full mb-3 px-3 py-2 border rounded-lg">
        <input id="admin-password" type="password" placeholder="Пароль" class="w-full mb-3 px-3 py-2 border rounded-lg">
        <button id="login-submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg">Войти</button>
        <button id="login-cancel" class="w-full mt-2 bg-gray-300 hover:bg-gray-400 py-2 rounded-lg">Отмена</button>
        <p id="login-error" class="text-red-500 text-sm text-center hidden mt-2">Неверные данные</p>
    </div>
</div>

                    
                    <div class="w-full md:w-auto">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Неделя:</label>
                        <div class="flex items-center gap-2">
                            <button id="prev-week" class="bg-gray-200 hover:bg-gray-300 p-2 rounded-full">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span id="week-display" class="font-medium">Загрузка...</span>
                            <button id="next-week" class="bg-gray-200 hover:bg-gray-300 p-2 rounded-full">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Table -->
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="overflow-x-auto">
                    <table id="schedule-table" class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Сотрудник</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Понедельник</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Вторник</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Среда</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Четверг</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Пятница</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Суббота</th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Воскресенье</th>
                            </tr>
                        </thead>
                        <tbody id="schedule-body" class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td colspan="8" class="px-6 py-4 text-center text-gray-500">Загрузка данных...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Login Modal -->
        <div id="login-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 login-modal">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-md">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-indigo-700">Вход в админ-панель</h2>
                        <button id="close-login" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>
                    
                    <form id="login-form">
                        <div class="mb-4">
                            <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Логин:</label>
                            <input type="text" id="username" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                        </div>
                        
                        <div class="mb-6">
                            <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Пароль:</label>
                            <input type="password" id="password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
                        </div>
                        
                        <div id="login-error" class="text-red-500 text-sm mb-4 hidden">Неверный логин или пароль</div>
                        
                        <button type="submit" class="w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
                            Войти <i class="fas fa-sign-in-alt ml-1"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Admin Panel (Hidden by default) -->
        <div id="admin-panel" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-6xl admin-panel">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-indigo-700">Административная панель</h2>
                        <button id="close-admin" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>

                    <!-- Tabs -->
                    <div class="border-b border-gray-200 mb-6">
                        <div class="flex space-x-8">
                            <button id="schedule-tab" class="tab-button active py-4 px-1 border-b-2 border-indigo-500 font-medium text-sm text-indigo-600">График работы</button>
                            <button id="employees-tab" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">Сотрудники</button>
                            <button id="overtime-tab" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">Овертаймы</button>
                        </div>
                    </div>

                    <!-- Schedule Admin -->
                    <div id="schedule-admin-content" class="tab-content">
                        <div class="mb-6 flex flex-wrap items-center gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Неделя:</label>
                                <div class="flex items-center gap-2">
                                    <button id="admin-prev-week" class="bg-gray-200 hover:bg-gray-300 p-2 rounded-full">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <span id="admin-week-display" class="font-medium">Загрузка...</span>
                                    <button id="admin-next-week" class="bg-gray-200 hover:bg-gray-300 p-2 rounded-full">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <button id="save-schedule" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                                    Сохранить график <i class="fas fa-save ml-1"></i>
                                </button>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table id="admin-schedule-table" class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Сотрудник</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Понедельник</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Вторник</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Среда</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Четверг</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Пятница</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Суббота</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Воскресенье</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-schedule-body" class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td colspan="8" class="px-6 py-4 text-center text-gray-500">Загрузка данных...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Employees Admin -->
                    <div id="employees-admin-content" class="tab-content hidden">
                        <div class="mb-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-2">Добавить нового сотрудника</h3>
                            <div class="flex flex-wrap gap-4">
                                <div class="flex-grow">
                                    <input type="text" id="new-employee-name" placeholder="Имя сотрудника" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                                </div>
                                <button id="add-employee" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
                                    Добавить <i class="fas fa-plus ml-1"></i>
                                </button>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Имя</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Действия</th>
                                    </tr>
                                </thead>
                                <tbody id="employees-list" class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td colspan="3" class="px-6 py-4 text-center text-gray-500">Загрузка данных...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Overtime Admin -->
                    <div id="overtime-admin-content" class="tab-content hidden">
                        <div class="mb-6 flex flex-wrap items-center gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Неделя:</label>
                                <div class="flex items-center gap-2">
                                    <button id="overtime-prev-week" class="bg-gray-200 hover:bg-gray-300 p-2 rounded-full">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <span id="overtime-week-display" class="font-medium">Загрузка...</span>
                                    <button id="overtime-next-week" class="bg-gray-200 hover:bg-gray-300 p-2 rounded-full">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <button id="save-overtime" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                                    Сохранить овертаймы <i class="fas fa-save ml-1"></i>
                                </button>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Сотрудник</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Понедельник</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Вторник</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Среда</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Четверг</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Пятница</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Суббота</th>
                                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Воскресенье</th>
                                    </tr>
                                </thead>
                                <tbody id="overtime-body" class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td colspan="8" class="px-6 py-4 text-center text-gray-500">Загрузка данных...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Supabase configuration
        const supabaseUrl = 'https://brhrqswautuamwkworrf.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJyaHJxc3dhdXR1YW13a3dvcnJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU4MjU5NzUsImV4cCI6MjA2MTQwMTk3NX0.AsHiUVQhMMQPmUL4JpZOSrJ_qkM2jobVbLI4xIOsjwo';
        const supabase = createClient(supabaseUrl, supabaseKey);

        // Global variables
        let currentWeekStart = getMonday(new Date());
        let employees = [];
        let schedules = {};
        let overtimes = {};
        let selectedEmployeeId = 'all';
        let isAdminLoggedIn = false;

        // DOM elements
        const employeeSelect = document.getElementById('employee-select');
        const weekDisplay = document.getElementById('week-display');
        const scheduleBody = document.getElementById('schedule-body');
        const prevWeekBtn = document.getElementById('prev-week');
        const nextWeekBtn = document.getElementById('next-week');
        
        // Login elements
        const loginModal = document.getElementById('login-modal');
        const closeLoginBtn = document.getElementById('close-login');
        const loginForm = document.getElementById('login-form');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('login-error');
        
        // Admin elements
        const toggleAdminBtn = document.getElementById('toggle-admin');
        const adminPanel = document.getElementById('admin-panel');
        const closeAdminBtn = document.getElementById('close-admin');
        const adminWeekDisplay = document.getElementById('admin-week-display');
        const adminScheduleBody = document.getElementById('admin-schedule-body');
        const adminPrevWeekBtn = document.getElementById('admin-prev-week');
        const adminNextWeekBtn = document.getElementById('admin-next-week');
        const saveScheduleBtn = document.getElementById('save-schedule');
        
        // Tabs
        const scheduleTab = document.getElementById('schedule-tab');
        const employeesTab = document.getElementById('employees-tab');
        const overtimeTab = document.getElementById('overtime-tab');
        const scheduleAdminContent = document.getElementById('schedule-admin-content');
        const employeesAdminContent = document.getElementById('employees-admin-content');
        const overtimeAdminContent = document.getElementById('overtime-admin-content');
        
        // Employees admin
        const newEmployeeName = document.getElementById('new-employee-name');
        const addEmployeeBtn = document.getElementById('add-employee');
        const employeesList = document.getElementById('employees-list');
        
        // Overtime admin
        const overtimeWeekDisplay = document.getElementById('overtime-week-display');
        const overtimeBody = document.getElementById('overtime-body');
        const overtimePrevWeekBtn = document.getElementById('overtime-prev-week');
        const overtimeNextWeekBtn = document.getElementById('overtime-next-week');
        const saveOvertimeBtn = document.getElementById('save-overtime');

        // Initialize the app
        document.addEventListener('DOMContentLoaded', async () => {
            // Load employees
            await loadEmployees();
            
            // Load initial schedule
            await loadSchedule(currentWeekStart);
            await loadOvertime(currentWeekStart);
            
            // Update UI
            updateWeekDisplay();
            updateAdminWeekDisplay();
            updateOvertimeWeekDisplay();
            
            // Set up event listeners
            setupEventListeners();
        });

      function renderSchedule() {
    const app = document.getElementById('app');
    let html = `
        <h1 class="text-3xl font-bold text-indigo-700 mb-6">${isAdmin ? 'Редактирование графика' : 'График работы'}</h1>
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white shadow rounded-lg">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-4 py-2">Сотрудник</th>
                        ${Array.from({ length: 7 }, (_, i) => `<th class="px-4 py-2">${['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'][i]}</th>`).join('')}
                    </tr>
                </thead>
                <tbody>
    `;

    employees.forEach(emp => {
        html += `<tr class="border-t">
                    <td class="px-4 py-2 font-medium">${emp.name}</td>`;
        for (let i = 0; i < 7; i++) {
            const day = new Date(currentWeekStart.getTime() + i * 86400000);
            const dayKey = formatDateForQuery(day);
            if (isAdmin) {
                const checked = schedules[emp.id]?.[dayKey] ? 'checked' : '';
                html += `<td class="px-4 py-2 text-center">
                    <input type="checkbox" data-employee="${emp.id}" data-date="${dayKey}" ${checked}>
                </td>`;
            } else {
                const isWorking = schedules[emp.id]?.[dayKey] ? '✓' : '-';
                html += `<td class="px-4 py-2 text-center">${isWorking}</td>`;
            }
        }
        html += '</tr>';
    });

    html += '</tbody></table></div>';

    if (isAdmin) {
        html += `
            <div class="mt-4 text-center">
                <button id="save-schedule" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg">Сохранить изменения</button>
            </div>
        `;
    }

async function saveScheduleChanges() {
    const checkboxes = document.querySelectorAll('input[type="checkbox"][data-employee]');
    const updates = [];

    checkboxes.forEach(cb => {
        updates.push({
            employee_id: cb.dataset.employee,
            date: cb.dataset.date,
            is_working: cb.checked
        });
    });

    for (const update of updates) {
        await supabase
            .from('schedule')
            .upsert(update, { onConflict: ['employee_id', 'date'] });
    }

    alert('График сохранен!');
}


    app.innerHTML = html;

    if (isAdmin) {
        document.getElementById('save-schedule').addEventListener('click', saveScheduleChanges);
    }
}

    let currentWeekStart = getMonday(new Date());
    let employees = [];
    let schedules = {};

    document.addEventListener('DOMContentLoaded', async () => {
        await loadEmployees();
        await loadSchedule(currentWeekStart);
        renderSchedule();
        setupNavigation();
    });

    function getMonday(date) {
        const d = new Date(date);
        const day = d.getDay();
        const diff = d.getDate() - day + (day === 0 ? -6 : 1);
        return new Date(d.setDate(diff));
    }

    async function loadEmployees() {
        const { data, error } = await supabase.from('employees').select('*').order('name', { ascending: true });
        if (error) {
            console.error('Ошибка загрузки сотрудников:', error);
            return;
        }
        employees = data;
    }

    async function loadSchedule(weekStart) {
        const start = formatDateForQuery(weekStart);
        const end = formatDateForQuery(new Date(weekStart.getTime() + 6 * 86400000));

        const { data, error } = await supabase
            .from('schedule')
            .select('employee_id, date, is_working')
            .gte('date', start)
            .lte('date', end);

        if (error) {
            console.error('Ошибка загрузки графика:', error);
            return;
        }

        schedules = {};
        employees.forEach(e => { schedules[e.id] = {}; });
        data.forEach(record => {
            if (schedules[record.employee_id]) {
                schedules[record.employee_id][record.date] = record.is_working;
            }
        });
    }

    function formatDateForQuery(date) {
        return date.toISOString().split('T')[0];
    }

    function renderSchedule() {
        const app = document.getElementById('app');
        let html = `
            <h1 class="text-3xl font-bold text-indigo-700 mb-6">График работы</h1>
            <div class="overflow-x-auto">
                <table class="min-w-full bg-white shadow rounded-lg">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-2">Сотрудник</th>
                            ${Array.from({ length: 7 }, (_, i) => `<th class="px-4 py-2">${['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'][i]}</th>`).join('')}
                        </tr>
                    </thead>
                    <tbody>
        `;

        employees.forEach(emp => {
            html += `<tr class="border-t">
                        <td class="px-4 py-2 font-medium">${emp.name}</td>`;
            for (let i = 0; i < 7; i++) {
                const day = new Date(currentWeekStart.getTime() + i * 86400000);
                const dayKey = formatDateForQuery(day);
                const isWorking = schedules[emp.id]?.[dayKey] ? '✓' : '-';
                html += `<td class="px-4 py-2 text-center">${isWorking}</td>`;
            }
            html += '</tr>';
        });

        html += '</tbody></table></div>';

        app.innerHTML = html;
    }

    function setupNavigation() {
        document.addEventListener('keydown', async (e) => {
            if (e.key === 'ArrowLeft') {
                currentWeekStart.setDate(currentWeekStart.getDate() - 7);
                await loadSchedule(currentWeekStart);
                renderSchedule();
            }
            if (e.key === 'ArrowRight') {
                currentWeekStart.setDate(currentWeekStart.getDate() + 7);
                await loadSchedule(currentWeekStart);
                renderSchedule();
            }
        });
    }

let isAdmin = false;

document.getElementById('admin-login-btn').addEventListener('click', () => {
    document.getElementById('login-modal').classList.remove('hidden');
});

document.getElementById('login-cancel').addEventListener('click', () => {
    document.getElementById('login-modal').classList.add('hidden');
});

document.getElementById('login-submit').addEventListener('click', () => {
    const username = document.getElementById('admin-username').value;
    const password = document.getElementById('admin-password').value;

    // Простая проверка (можно заменить на запрос к Supabase)
    if (username === 'admin' && password === '1234') {
        isAdmin = true;
        document.getElementById('login-modal').classList.add('hidden');
        renderSchedule(); // перерисовать расписание для редактирования
    } else {
        document.getElementById('login-error').classList.remove('hidden');
    }
});

                    </script>
</html>
